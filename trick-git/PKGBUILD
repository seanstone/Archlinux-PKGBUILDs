# Maintainer: En Shih <seanstone5923@gmail.com>
pkgname=trick-git
pkgver=r1035.348bbb37
pkgrel=1
pkgdesc="Trick Simulation Environment"
arch=('x86_64')
url="https://github.com/nasa/trick"
license=('custom')
depends=('llvm' 'clang' 'python2' 'perl' 'java-runtime' 'swig' 'openmotif' 'udunits')
makedepends=('git')
provides=('trick')
conflicts=('trick')
source=('git+https://github.com/nasa/trick.git' 'install-destdir.patch')
md5sums=('SKIP'
         '09f11823eb6970b13d504d24f58929d8')

pkgver() {
    cd "$srcdir/trick"
    echo "r$(git rev-list --count HEAD).$(git rev-parse --short HEAD)"
}

prepare() {
    cd $srcdir/trick
    patch -Np1 -i "$srcdir/install-destdir.patch"
}

build() {
  cd "$srcdir/trick"
  ./configure --prefix=/usr
  make
}

package() {
  cd "$srcdir/trick"
  make DESTDIR=$pkgdir install
}
